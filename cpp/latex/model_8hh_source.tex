\hypertarget{model_8hh_source}{}\doxysection{model.\+hh}
\label{model_8hh_source}\index{src/core/model.hh@{src/core/model.hh}}
\mbox{\hyperlink{model_8hh}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{job_8hh}{src/core/job.hh}}"{}}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{model__archive_8hh}{src/core/model\_archive.hh}}"{}}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}ssrc/core/cheduler.hh"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{status_8hh}{src/core/status.hh}}"{}}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacetorchserve}{torchserve}} \{}
\DoxyCodeLine{12 \textcolor{keyword}{struct }\mbox{\hyperlink{structtorchserve_1_1_model_config}{ModelConfig}} \{}
\DoxyCodeLine{13   std::string \mbox{\hyperlink{structtorchserve_1_1_model_config_abd45894cf05f86ff85e355b04ef9ebd9}{url}};}
\DoxyCodeLine{14   \textcolor{comment}{// The number of a model's copies on CPU or GPU.}}
\DoxyCodeLine{15   uint8\_t \mbox{\hyperlink{structtorchserve_1_1_model_config_a1356f3a54b3bec0fbe28db67a518c25a}{numInstances}};}
\DoxyCodeLine{16   \textcolor{comment}{// The minimum number of workers distributed on this model's instances.}}
\DoxyCodeLine{17   uint16\_t \mbox{\hyperlink{structtorchserve_1_1_model_config_a1f40d32d7d09e57c602b9c02b63e2dd6}{minWorkers}};}
\DoxyCodeLine{18   \textcolor{comment}{// The maximum number of workers distributed on this model's instances.}}
\DoxyCodeLine{19   uint16\_t \mbox{\hyperlink{structtorchserve_1_1_model_config_aac46250a348d3130368f44b2abb34b3a}{maxWorkers}};}
\DoxyCodeLine{20   \textcolor{comment}{// The maximum size of queue holding incoming requests for the model.}}
\DoxyCodeLine{21   uint32\_t \mbox{\hyperlink{structtorchserve_1_1_model_config_a2d98ea6294efc4eb3d5979566fac61e0}{maxQueueSize}};}
\DoxyCodeLine{22   \textcolor{comment}{// The maximum etry attempts for a model incase of a failure.}}
\DoxyCodeLine{23   uint16\_t \mbox{\hyperlink{structtorchserve_1_1_model_config_a2abada615978285119be894ae26e0898}{maxRetries}};}
\DoxyCodeLine{24   \textcolor{comment}{// The maximum batch size in ms that a model is expected to handle.}}
\DoxyCodeLine{25   uint16\_t \mbox{\hyperlink{structtorchserve_1_1_model_config_a60511b5a3d3f98143e3ceeb6764cbf97}{batchSize}};}
\DoxyCodeLine{26   \textcolor{comment}{// The maximum batch delay time TorchServe waits to receive batch\_size number}}
\DoxyCodeLine{27   \textcolor{comment}{// of requests.}}
\DoxyCodeLine{28   uint32\_t \mbox{\hyperlink{structtorchserve_1_1_model_config_a115af0b4c4dec81b4071a963443488c3}{maxBatchDelayMSec}};}
\DoxyCodeLine{29   \textcolor{comment}{// the timeout in second of a model's response.}}
\DoxyCodeLine{30   uint32\_t \mbox{\hyperlink{structtorchserve_1_1_model_config_a982fadd661666628aa263b9c1ee51555}{responseTimeoutSec}};}
\DoxyCodeLine{31 \};}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 \textcolor{comment}{// WorkflowSpec defined in}}
\DoxyCodeLine{34 \textcolor{comment}{// https://github.com/pytorch/serve/blob/master/docs/workflows.md\#workflow-\/specification-\/file}}
\DoxyCodeLine{35 \textcolor{keyword}{struct }\mbox{\hyperlink{structtorchserve_1_1_workflow_spec}{WorkflowSpec}} \{}
\DoxyCodeLine{36   \textcolor{comment}{// The configuration for a single model or an ensemble model.}}
\DoxyCodeLine{37   \mbox{\hyperlink{structtorchserve_1_1_model_config}{ModelConfig}} \mbox{\hyperlink{structtorchserve_1_1_workflow_spec_a37b33661ffc22fa163b22dff76091217}{modelConfig}};}
\DoxyCodeLine{38 }
\DoxyCodeLine{39   \textcolor{comment}{// The mapping b/w a model and its configuration.}}
\DoxyCodeLine{40   \textcolor{comment}{// key: a model version name; value: a model configuration.}}
\DoxyCodeLine{41   std::unordered\_map<std::string, std::unique\_ptr<ModelConfig> > \mbox{\hyperlink{structtorchserve_1_1_workflow_spec_aebd920b4df90058879a8b195f5631a55}{subModels}};}
\DoxyCodeLine{42 }
\DoxyCodeLine{43   \textcolor{comment}{// Descripes the workflow of an ensemble model.}}
\DoxyCodeLine{44   \textcolor{comment}{// key: a model version name;}}
\DoxyCodeLine{45   \textcolor{comment}{// value: a list of model version names reached out by the model defined in}}
\DoxyCodeLine{46   \textcolor{comment}{// the key.}}
\DoxyCodeLine{47   std::unordered\_map<std::string, std::vector<std::string> > \mbox{\hyperlink{structtorchserve_1_1_workflow_spec_aaea99d9d347709e7742fcf6548c36085}{dag}};}
\DoxyCodeLine{48 \};}
\DoxyCodeLine{49 }
\DoxyCodeLine{50 \textcolor{keyword}{class }\mbox{\hyperlink{classtorchserve_1_1_model}{Model}} \{}
\DoxyCodeLine{51   \textcolor{keyword}{public}:}
\DoxyCodeLine{52   \mbox{\hyperlink{structtorchserve_1_1_workflow_spec}{WorkflowSpec}} \mbox{\hyperlink{classtorchserve_1_1_model_aab74b4afb2881d670e330afc706a9971}{workflowSpec}};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54   \mbox{\hyperlink{classtorchserve_1_1_model_a2e85ac9b19e1cd5d6f3f3dddea9b6f58}{Model}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtorchserve_1_1_manifest}{Manifest}} \&\mbox{\hyperlink{classtorchserve_1_1_model_a310718ee75fecf1188fe0dbbf90f418a}{manifest}});}
\DoxyCodeLine{55 }
\DoxyCodeLine{56   \textcolor{comment}{// Update a model configuration}}
\DoxyCodeLine{57   \mbox{\hyperlink{classtorchserve_1_1_status}{Status}} \mbox{\hyperlink{classtorchserve_1_1_model_a3464c12af9bf1dbea45946afa82cbda6}{updateModel}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtorchserve_1_1_model_config}{ModelConfig}} \&modelConfig, \textcolor{keywordtype}{bool} isStartup,}
\DoxyCodeLine{58                      \textcolor{keywordtype}{bool} isCleanup);}
\DoxyCodeLine{59   \textcolor{comment}{// Add a job into the model's scheduler queue.}}
\DoxyCodeLine{60   \textcolor{keywordtype}{void} \mbox{\hyperlink{classtorchserve_1_1_model_a6d2a025416b57eb799b2f52dda3b2dba}{addJob}}(\mbox{\hyperlink{classtorchserve_1_1_job}{Job}} \&job);}
\DoxyCodeLine{61   }
\DoxyCodeLine{62   \textcolor{keyword}{private}:}
\DoxyCodeLine{63   std::unique\_ptr<Manifest> \mbox{\hyperlink{classtorchserve_1_1_model_a310718ee75fecf1188fe0dbbf90f418a}{manifest}};}
\DoxyCodeLine{64   \textcolor{comment}{// A chain of schedulers.}}
\DoxyCodeLine{65   std::unique\_ptr<Scheduler> \mbox{\hyperlink{classtorchserve_1_1_model_a2c3c3bdc3906ae417bf7b902a477476c}{schedulers}};}
\DoxyCodeLine{66 \};}
\DoxyCodeLine{67 \}  \textcolor{comment}{// namespace torchserve}}

\end{DoxyCode}
